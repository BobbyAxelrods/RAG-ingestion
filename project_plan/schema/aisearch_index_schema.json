{
  "$schema": "https://schema.management.azure.com/schemas/2023-07-01-preview/searchindex.json#",
  "name": "insurance-documents-index",
  "fields": [
    {
      "name": "doc_id",
      "type": "Edm.String",
      "key": true,
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": null,
      "comment": "Primary key: UUID or hash combining file_id + page_number"
    },
    {
      "name": "sys_file_name",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "standard.lucene"
    },
    {
      "name": "sys_file_path",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "sys_file_size_bytes",
      "type": "Edm.Int64",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "sys_file_type",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "pdf/jpg/docx/xlsx"
    },
    {
      "name": "sys_last_updated",
      "type": "Edm.DateTimeOffset",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "sys_page_count",
      "type": "Edm.Int32",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "sys_extracted_at",
      "type": "Edm.DateTimeOffset",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "sys_processing_version",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "file_name",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": true,
      "sortable": true,
      "facetable": false,
      "analyzer": "standard.lucene",
      "comment": "Display name for user-facing results"
    },
    {
      "name": "document_id",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": false,
      "facetable": true,
      "comment": "CA/GA/… style document identifier"
    },
    {
      "name": "library_name_en",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": true,
      "sortable": false,
      "facetable": true,
      "analyzer": "en.microsoft"
    },
    {
      "name": "library_name_tc",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": true,
      "sortable": false,
      "facetable": true,
      "analyzer": "zh-Hant.microsoft",
      "comment": "Traditional Chinese analyzer for TC content"
    },
    {
      "name": "category_name_en",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": true,
      "sortable": false,
      "facetable": true,
      "analyzer": "en.microsoft"
    },
    {
      "name": "category_name_tc",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": true,
      "sortable": false,
      "facetable": true,
      "analyzer": "zh-Hant.microsoft"
    },
    {
      "name": "title_name_en",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": false,
      "sortable": true,
      "facetable": false,
      "analyzer": "en.microsoft"
    },
    {
      "name": "title_name_tc",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": false,
      "sortable": true,
      "facetable": false,
      "analyzer": "zh-Hant.microsoft"
    },
    {
      "name": "knowledge_name",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "standard.lucene",
      "comment": "Human-friendly knowledge base title"
    },
    {
      "name": "file_url",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "Blob storage URL for document access"
    },
    {
      "name": "branch_name",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": false,
      "facetable": true,
      "comment": "HK/MACAU for branch filtering"
    },
    {
      "name": "item_type",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "Document classification type"
    },
    {
      "name": "item_url",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "doc_type",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "Document type alias (pdf/docx/…) from source metadata"
    },
    {
      "name": "total_pages",
      "type": "Edm.Int32",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": true,
      "facetable": false
    },
    {
      "name": "poc_scope",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "Maps ETL field 'POC scope?' (Y/N)"
    },
    {
      "name": "file_description",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "standard.lucene"
    },
    {
      "name": "knowledge_ingestion_reason",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "standard.lucene"
    },
    {
      "name": "knowledge_processing_reason",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "standard.lucene"
    },
    {
      "name": "knowledge_ingestion_stage",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "knowledge_processing_stage",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "knowledge_id",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "knowledge_traceid",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "item_status",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "knowledge_version",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false
    },
    {
      "name": "sheet_name",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "Maps ETL field '__sheet_name__'"
    },
    {
      "name": "batch_order",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": true,
      "facetable": false
    },
    {
      "name": "index_status",
      "type": "Edm.String",
      "retrievable": false,
      "searchable": false,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "Maps ETL field 'INDEX_STATUS' (Yes/No)"
    },
    {
      "name": "chunk_content",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "standard.lucene",
      "comment": "Main searchable content - full page text"
    },
    {
      "name": "chunk_content_vector",
      "type": "Collection(Edm.Single)",
      "dimensions": 1536,
      "vectorSearchProfile": "vector-profile-1536-cosine",
      "retrievable": true,
      "searchable": true,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "comment": "Text embeddings"
    },
    {
      "name": "chunk_page_number",
      "type": "Edm.Int32",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": true,
      "facetable": false,
      "comment": "Page number for precise document navigation"
    },
    {
      "name": "chunk_function_summary",
      "type": "Edm.String",
      "retrievable": true,
      "searchable": true,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "en.microsoft",
      "comment": "LLM-generated page summary for better context"
    },
    {
      "name": "chunk_char_count",
      "type": "Edm.Int32",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": true,
      "facetable": false
    },
    {
      "name": "chunk_word_count",
      "type": "Edm.Int32",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": true,
      "facetable": false
    },
    {
      "name": "chunk_sentence_count",
      "type": "Edm.Int32",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": true,
      "facetable": false
    },
    {
      "name": "chunk_entities",
      "type": "Collection(Edm.String)",
      "retrievable": true,
      "searchable": true,
      "filterable": true,
      "sortable": false,
      "facetable": true,
      "analyzer": "keyword",
      "comment": "Named entities: products, terms, locations for faceted search"
    },
    {
      "name": "qa_questions",
      "type": "Collection(Edm.String)",
      "retrievable": true,
      "searchable": true,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "en.microsoft",
      "comment": "LLM-generated questions for hypothetical question matching"
    },
    {
      "name": "qa_answers",
      "type": "Collection(Edm.String)",
      "retrievable": true,
      "searchable": true,
      "filterable": false,
      "sortable": false,
      "facetable": false,
      "analyzer": "en.microsoft",
      "comment": "LLM-generated answers paired with questions"
    },
    {
      "name": "qa_confidence",
      "type": "Edm.Double",
      "retrievable": true,
      "searchable": false,
      "filterable": true,
      "sortable": true,
      "facetable": false,
      "comment": "Confidence score for QA pairs (0.0-1.0)"
    }
  ],
  "vectorSearch": {
    "algorithms": [
      {
        "name": "vector-algorithm-1536-cosine",
        "kind": "hnsw",
        "hnswParameters": {
          "metric": "cosine",
          "m": 4,
          "efConstruction": 400,
          "efSearch": 500
        }
      }
    ],
    "profiles": [
      {
        "name": "vector-profile-1536-cosine",
        "algorithm": "vector-algorithm-1536-cosine"
      }
    ]
  },
  "semantic": {
    "configurations": [
      {
        "name": "insurance-semantic-config-en",
        "prioritizedFields": {
          "titleField": {
            "fieldName": "file_name"
          },
          "prioritizedContentFields": [
            {
              "fieldName": "title_name_en"
            },
            {
              "fieldName": "chunk_content"
            },
            {
              "fieldName": "chunk_function_summary"
            },
            {
              "fieldName": "qa_answers"
            },
            {
              "fieldName": "qa_questions"
            }
          ],
          "prioritizedKeywordsFields": [
            {
              "fieldName": "chunk_entities"
            },
            {
              "fieldName": "category_name_en"
            },
            {
              "fieldName": "library_name_en"
            },
            {
              "fieldName": "document_id"
            },
            {
              "fieldName": "branch_name"
            }
          ]
        }
      },
      {
        "name": "insurance-semantic-config-tc",
        "prioritizedFields": {
          "titleField": {
            "fieldName": "file_name"
          },
          "prioritizedContentFields": [
            {
              "fieldName": "title_name_tc"
            },
            {
              "fieldName": "chunk_content"
            },
            {
              "fieldName": "chunk_function_summary"
            },
            {
              "fieldName": "qa_answers"
            },
            {
              "fieldName": "qa_questions"
            }
          ],
          "prioritizedKeywordsFields": [
            {
              "fieldName": "chunk_entities"
            },
            {
              "fieldName": "category_name_tc"
            },
            {
              "fieldName": "library_name_tc"
            },
            {
              "fieldName": "document_id"
            },
            {
              "fieldName": "branch_name"
            }
          ]
        }
      }
    ]
  },
  "suggesters": [
    {
      "name": "sg-insurance-products",
      "searchMode": "analyzingInfixMatching",
      "sourceFields": [
        "chunk_entities",
        "title_name_en",
        "category_name_en"
      ]
    }
  ]
}